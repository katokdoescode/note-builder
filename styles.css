/*

This CSS file will be included with your plugin, and
available in the app when your plugin is enabled.

If your plugin does not need CSS, delete this file.

*/
:root {
	@media (prefers-color-scheme: light) {
		--mic-ai-fill: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cg fill='none'%3E%3Cpath d='M12.6 23.26h-.02l-.07.03h-.03l-.07-.03h-.03v.01l-.02.43v.02l.02.02.1.07h.02l.11-.07.01-.02v-.02l-.01-.42q0-.02-.02-.02m.27-.11h-.02l-.18.09-.01.01v.01l.02.43v.02l.2.1.04-.01v-.02l-.03-.61q0-.02-.02-.03m-.72 0a.02.02 0 0 0-.02.01l-.01.02-.03.61.01.03h.02l.2-.1.01-.02.02-.43v-.01l-.01-.01z'/%3E%3Cpath fill='black' d='M19.07 12.01a1 1 0 0 1 .85 1.13 8 8 0 0 1-6.92 6.8V21a1 1 0 1 1-2 0v-1.06a8 8 0 0 1-6.92-6.8 1 1 0 0 1 1.98-.28 6 6 0 0 0 11.88 0 1 1 0 0 1 1.13-.85M12 2c.82 0 1.6.2 2.27.55a3 3 0 0 0 .76 5.29l.38.13a1 1 0 0 1 .62.62l.13.38c.17.5.47.93.84 1.27V12a5 5 0 0 1-10 0V7a5 5 0 0 1 5-5m7-1a1 1 0 0 1 .9.56l.05.12.13.38a3 3 0 0 0 1.68 1.8l.18.07.38.12a1 1 0 0 1 .12 1.85l-.12.05-.38.13a3 3 0 0 0-1.8 1.68l-.07.19-.12.37a1 1 0 0 1-1.85.12l-.05-.12-.13-.37a3 3 0 0 0-1.68-1.8l-.19-.07-.37-.13a1 1 0 0 1-.12-1.85l.12-.05.37-.13a3 3 0 0 0 1.8-1.68l.07-.19.13-.37A1 1 0 0 1 19 1'/%3E%3C/g%3E%3C/svg%3E%0A");
		--mic-ai-line: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M12.6 23.26h-.02l-.07.03h-.03l-.07-.03h-.03v.01l-.02.43v.02l.02.02.1.07h.02l.11-.07.01-.02v-.02l-.01-.42q0-.02-.02-.02m.27-.11h-.02l-.18.09-.01.01v.01l.02.43v.02l.2.1.04-.01v-.02l-.03-.61q0-.02-.02-.03m-.72 0a.02.02 0 0 0-.02.01l-.01.02-.03.61.01.03h.02l.2-.1.01-.02.02-.43v-.01l-.01-.01z'/%3E%3Cpath fill='black' d='M19.95 1.68a1 1 0 0 0-1.9 0l-.13.38a3 3 0 0 1-1.87 1.87l-.37.12a1 1 0 0 0 0 1.9l.37.13a3 3 0 0 1 1.87 1.86l.13.38a1 1 0 0 0 1.9 0l.13-.38a3 3 0 0 1 1.86-1.87l.38-.12a1 1 0 0 0 0-1.9l-.38-.13a3 3 0 0 1-1.87-1.87zM18.2 5q.44-.35.8-.8.35.44.8.8a5 5 0 0 0-.8.8 5 5 0 0 0-.8-.8M12 2a5 5 0 0 0-5 5v5a5 5 0 0 0 10 0v-2a1 1 0 1 0-2 0v2a3 3 0 0 1-6 0V7a3 3 0 0 1 3.75-2.9 1 1 0 1 0 .5-1.94A5 5 0 0 0 12 2m1 17.94a8 8 0 0 0 6.92-6.8 1 1 0 0 0-1.98-.28 6 6 0 0 1-11.88 0 1 1 0 0 0-1.98.28 8 8 0 0 0 6.92 6.8V21a1 1 0 1 0 2 0z'/%3E%3C/g%3E%3C/svg%3E%0A");
		--stop-circle-fill: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20M9 9v6h6V9z'/%3E%3C/svg%3E");
		--upload-2-line: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cg fill='none'%3E%3Cpath d='m12.593 23.258-.011.002-.071.035-.02.004-.014-.004-.071-.035q-.016-.005-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427q-.004-.016-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093q.019.005.029-.008l.004-.014-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014-.034.614q.001.018.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z'/%3E%3Cpath fill='black' d='M20 15a1 1 0 0 1 1 1v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4a1 1 0 1 1 2 0v4h14v-4a1 1 0 0 1 1-1M12.884 3.474 16.95 7.54a1 1 0 1 1-1.414 1.414L13 6.42V16a1 1 0 1 1-2 0V6.419L8.464 8.954A1 1 0 0 1 7.05 7.54l4.066-4.066a1.25 1.25 0 0 1 1.768 0'/%3E%3C/g%3E%3C/svg%3E");
	}

	@media (prefers-color-scheme: dark) {
		--mic-ai-fill: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cg fill='none'%3E%3Cpath d='M12.6 23.26h-.02l-.07.03h-.03l-.07-.03h-.03v.01l-.02.43v.02l.02.02.1.07h.02l.11-.07.01-.02v-.02l-.01-.42q0-.02-.02-.02m.27-.11h-.02l-.18.09-.01.01v.01l.02.43v.02l.2.1.04-.01v-.02l-.03-.61q0-.02-.02-.03m-.72 0a.02.02 0 0 0-.02.01l-.01.02-.03.61.01.03h.02l.2-.1.01-.02.02-.43v-.01l-.01-.01z'/%3E%3Cpath fill='white' d='M19.07 12.01a1 1 0 0 1 .85 1.13 8 8 0 0 1-6.92 6.8V21a1 1 0 1 1-2 0v-1.06a8 8 0 0 1-6.92-6.8 1 1 0 0 1 1.98-.28 6 6 0 0 0 11.88 0 1 1 0 0 1 1.13-.85M12 2c.82 0 1.6.2 2.27.55a3 3 0 0 0 .76 5.29l.38.13a1 1 0 0 1 .62.62l.13.38c.17.5.47.93.84 1.27V12a5 5 0 0 1-10 0V7a5 5 0 0 1 5-5m7-1a1 1 0 0 1 .9.56l.05.12.13.38a3 3 0 0 0 1.68 1.8l.18.07.38.12a1 1 0 0 1 .12 1.85l-.12.05-.38.13a3 3 0 0 0-1.8 1.68l-.07.19-.12.37a1 1 0 0 1-1.85.12l-.05-.12-.13-.37a3 3 0 0 0-1.68-1.8l-.19-.07-.37-.13a1 1 0 0 1-.12-1.85l.12-.05.37-.13a3 3 0 0 0 1.8-1.68l.07-.19.13-.37A1 1 0 0 1 19 1'/%3E%3C/g%3E%3C/svg%3E%0A");
		--mic-ai-line: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M12.6 23.26h-.02l-.07.03h-.03l-.07-.03h-.03v.01l-.02.43v.02l.02.02.1.07h.02l.11-.07.01-.02v-.02l-.01-.42q0-.02-.02-.02m.27-.11h-.02l-.18.09-.01.01v.01l.02.43v.02l.2.1.04-.01v-.02l-.03-.61q0-.02-.02-.03m-.72 0a.02.02 0 0 0-.02.01l-.01.02-.03.61.01.03h.02l.2-.1.01-.02.02-.43v-.01l-.01-.01z'/%3E%3Cpath fill='white' d='M19.95 1.68a1 1 0 0 0-1.9 0l-.13.38a3 3 0 0 1-1.87 1.87l-.37.12a1 1 0 0 0 0 1.9l.37.13a3 3 0 0 1 1.87 1.86l.13.38a1 1 0 0 0 1.9 0l.13-.38a3 3 0 0 1 1.86-1.87l.38-.12a1 1 0 0 0 0-1.9l-.38-.13a3 3 0 0 1-1.87-1.87zM18.2 5q.44-.35.8-.8.35.44.8.8a5 5 0 0 0-.8.8 5 5 0 0 0-.8-.8M12 2a5 5 0 0 0-5 5v5a5 5 0 0 0 10 0v-2a1 1 0 1 0-2 0v2a3 3 0 0 1-6 0V7a3 3 0 0 1 3.75-2.9 1 1 0 1 0 .5-1.94A5 5 0 0 0 12 2m1 17.94a8 8 0 0 0 6.92-6.8 1 1 0 0 0-1.98-.28 6 6 0 0 1-11.88 0 1 1 0 0 0-1.98.28 8 8 0 0 0 6.92 6.8V21a1 1 0 1 0 2 0z'/%3E%3C/g%3E%3C/svg%3E%0A");
		--stop-circle-fill: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20M9 9v6h6V9z'/%3E%3C/svg%3E");
		--upload-2-line: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cg fill='none'%3E%3Cpath d='m12.593 23.258-.011.002-.071.035-.02.004-.014-.004-.071-.035q-.016-.005-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427q-.004-.016-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093q.019.005.029-.008l.004-.014-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014-.034.614q.001.018.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z'/%3E%3Cpath fill='white' d='M20 15a1 1 0 0 1 1 1v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4a1 1 0 1 1 2 0v4h14v-4a1 1 0 0 1 1-1M12.884 3.474 16.95 7.54a1 1 0 1 1-1.414 1.414L13 6.42V16a1 1 0 1 1-2 0V6.419L8.464 8.954A1 1 0 0 1 7.05 7.54l4.066-4.066a1.25 1.25 0 0 1 1.768 0'/%3E%3C/g%3E%3C/svg%3E");
	}
}

.recording-wrapper {
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

.recording-title-section {
	display: flex;
	flex-direction: column;
	gap: .5rem;
	margin-bottom: 1rem;
	.recording-title, .recording-subtitle {
		margin: 0;
	}
}
.recording-container {
	display: flex;
	flex-direction: column;
	gap: .5rem;
	width: 100%;
}

.recording-controls {
	display: flex;
	gap: 1rem;
	justify-content: space-between;
	flex-direction: column;
}

.recording-options, .recording-actions {
	display: flex;
	gap: .5rem;
}

.recording-options {
	flex-direction: column;
}

.recording-actions {
	align-items: flex-end;
	justify-content: flex-end;
	flex-wrap: wrap;
}

.recording-editors {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	width: 100%;

	pre {
		margin: 0;
	}
}

.recording-textfield,
.recording-summary-textfield,
.recording-tasks-textfield,
.recording-reflex-textfield {
	resize: vertical;
	min-height: 100px;
	width: 100%;
	animation: none;
}

.recording-merge-label {
	display: flex;
	gap: .5rem;
	align-items: center;
	justify-content: space-between;

	input[type="checkbox"] {
		margin: 0;
	}
}

.recording-waveform {
	width: 100%;
	height: 120px;
}


.recording-button {
	background-position: center;
	background-repeat: no-repeat;
	background-size: 70%;
	aspect-ratio: 1 / 1;

	&.start {
		background-image: var(--mic-ai-line);
	}

	&.stop {
		background-image: var(--stop-circle-fill);
	}
}

.recording-button-section {
	display: flex;
	gap: .5rem;

	&.col {
		flex-direction: column;
	}
}

.upload-button {
	background-image: var(--upload-2-line);
	background-size: 70%;
	background-position: center;
	background-repeat: no-repeat;
	aspect-ratio: 1 / 1;
}


/* ========================================
   NEW UNIFIED BUTTON & COMPONENT STYLES
   ======================================== */

/* Horizontal Button Group Layout */
.button-group-horizontal {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 12px;
	margin-bottom: 1rem;
}

/* Button Sizes - Touchscreen Friendly */
.button-restart {
	width: 45px;
	height: 45px;
	min-width: 45px;
	min-height: 45px;
	aspect-ratio: 1 / 1;
	background-position: center;
	background-repeat: no-repeat;
	background-size: 65%;
	cursor: pointer;
	border-radius: var(--button-radius);
	transition: opacity 0.2s ease, transform 0.1s ease;
}

.button-restart:hover {
	opacity: 0.8;
}

.button-restart:active {
	transform: scale(0.95);
}

.button-mic {
	width: 60px;
	height: 60px;
	min-width: 60px;
	min-height: 60px;
	aspect-ratio: 1 / 1;
	background-position: center;
	background-repeat: no-repeat;
	background-size: 70%;
	cursor: pointer;
	border-radius: var(--button-radius);
	transition: opacity 0.2s ease, transform 0.1s ease;
	position: relative;
}

.button-mic:hover {
	opacity: 0.8;
}

.button-mic:active {
	transform: scale(0.95);
}

.button-upload {
	width: 45px;
	height: 45px;
	min-width: 45px;
	min-height: 45px;
	aspect-ratio: 1 / 1;
	background-position: center;
	background-repeat: no-repeat;
	background-size: 65%;
	cursor: pointer;
	border-radius: var(--button-radius);
	transition: opacity 0.2s ease, transform 0.1s ease;
}

.button-upload:hover {
	opacity: 0.8;
}

.button-upload:active {
	transform: scale(0.95);
}

/* Recording Timer */
.recording-timer {
	font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
	font-size: 14px;
	text-align: center;
	margin-top: 0.5rem;
	font-weight: 500;
	min-width: 60px;
	transition: color 0.2s ease;
}

.recording-timer.idle {
	color: var(--text-faint);
}

.recording-timer.recording {
	color: var(--text-error);
}

.recording-timer.stopped {
	color: var(--text-normal);
}

/* Progressive Disclosure Sections */
.progressive-section {
	max-height: 0;
	overflow: hidden;
	opacity: 0;
	transition: max-height 0.3s ease-out, opacity 0.3s ease-out, margin 0.3s ease-out;
}

.progressive-section.active {
	max-height: 1000px; /* Large enough for content */
	opacity: 1;
	margin-bottom: 1rem;
}

/* Button Loading States */

/* Footer loader - shown before all action buttons */
.footer-loading-spinner {
	display: none;
	width: 20px;
	height: 20px;
	border: 3px solid var(--background-modifier-border);
	border-top-color: var(--interactive-accent);
	border-radius: 50%;
	animation: spin 0.6s linear infinite;
	flex-shrink: 0;
	margin-right: auto; /* Pushes spinner to left despite flex-end */
	align-self: center; /* Centers vertically */
}

.footer-loading-spinner.active {
	display: block;
}

/* Mic button internal loader with sonar animation around the button */
.button-mic.button-loading {
	pointer-events: none;
	position: relative;
}

/* Small internal spinner in the center of the mic button */
.button-mic.button-loading::before {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: 20px;
	height: 20px;
	margin: -10px 0 0 -10px;
	border: 2px solid transparent;
	border-top-color: var(--interactive-accent);
	border-radius: 50%;
	animation: spin 0.8s linear infinite;
	z-index: 2;
}

/* Multi-layered sonar animation pulsing around the mic button using box-shadow */
.button-mic.button-loading::after {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	border-radius: 50%;
	animation: sonar-pulse 2s ease-out infinite;
	z-index: 0;
	pointer-events: none;
}

@keyframes spin {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

@keyframes sonar-pulse {
	0% {
		box-shadow:
			0 0 0 0px var(--interactive-accent),
			0 0 0 0px var(--interactive-accent),
			0 0 0 0px var(--interactive-accent);
		opacity: 0;
	}
	10% {
		box-shadow:
			0 0 0 2px var(--interactive-accent),
			0 0 0 0px var(--interactive-accent),
			0 0 0 0px var(--interactive-accent);
		opacity: 0.8;
	}
	25% {
		box-shadow:
			0 0 0 8px var(--interactive-accent),
			0 0 0 2px var(--interactive-accent),
			0 0 0 0px var(--interactive-accent);
		opacity: 0.6;
	}
	40% {
		box-shadow:
			0 0 0 14px var(--interactive-accent),
			0 0 0 8px var(--interactive-accent),
			0 0 0 2px var(--interactive-accent);
		opacity: 0.4;
	}
	60% {
		box-shadow:
			0 0 0 20px var(--interactive-accent),
			0 0 0 14px var(--interactive-accent),
			0 0 0 8px var(--interactive-accent);
		opacity: 0.2;
	}
	80% {
		box-shadow:
			0 0 0 26px var(--interactive-accent),
			0 0 0 20px var(--interactive-accent),
			0 0 0 14px var(--interactive-accent);
		opacity: 0.05;
	}
	100% {
		box-shadow:
			0 0 0 32px var(--interactive-accent),
			0 0 0 26px var(--interactive-accent),
			0 0 0 20px var(--interactive-accent);
		opacity: 0;
	}
}

/* Button Group Timer Container */
.button-timer-container {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 0;
}

.recording-upload-droparea {
	border: 1px dashed var(--background-modifier-border);
	padding: 0.5em;
	margin-top: 0.5em;
	text-align: center;
	cursor: pointer;
	transition: background-color 0.2s ease;

	&.drag-over {
		background-color: var(--background-modifier-hover);
	}
}

.recording-upload-input {
	display: none;
}

.modal-drop-overlay {
	position: fixed;
	inset: 0;
	z-index: 1000;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(0,0,0,0.25);
	pointer-events: none;
	opacity: 0;
	transition: opacity 0.2s;
}

.modal-drop-overlay.active {
	pointer-events: all;
	opacity: 1;
}

.modal-drop-overlay .drop-message {
	background: var(--background-primary);
	color: var(--text-normal);
	border: 2px dashed var(--background-modifier-border);
	border-radius: 1em;
	padding: 2em 3em;
	font-size: 1.2em;
	box-shadow: 0 2px 16px rgba(0,0,0,0.15);
}

/* Custom Command Modal Styles */
.custom-command-section {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	margin-bottom: 1rem;
	width: 100%;
}

.custom-command-label {
	font-size: 0.9rem;
	font-weight: 600;
	color: var(--text-muted);
	margin: 0;
}

.custom-prompt-field {
	min-height: 80px;
}

.recording-button.process {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 0.5rem 1rem;
	border-radius: var(--button-radius);
	font-weight: 500;
	cursor: pointer;
	transition: background-color 0.2s ease;
}

.recording-button.process:hover {
	background-color: var(--interactive-accent-hover);
}

.recording-button.process:active {
	background-color: var(--interactive-accent-active);
}

/* Smart Memo Modal Styles */
.smart-memo-section {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	margin-bottom: 1rem;
	width: 100%;
}

.smart-memo-label {
	font-size: 0.9rem;
	font-weight: 600;
	color: var(--text-muted);
	margin: 0;
}

.smart-memo-field {
	min-height: 200px;
}

.smart-memo-status {
	padding: 0.5rem;
	margin: 0.5rem 0;
	background: var(--background-secondary);
	border-radius: var(--radius-s);
	text-align: center;
	font-weight: 500;
	color: var(--text-muted);
	min-height: 1.5rem;
}

/* ========================================
   ACCESSIBILITY STYLES
   ======================================== */

/* Screen reader only content */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

/* Focus visible for keyboard navigation */
button:focus-visible,
input:focus-visible,
textarea:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
}

/* ========================================
   MOBILE RESPONSIVE STYLES
   ======================================== */

@media (max-width: 480px) {
	/* Make modals nearly full screen on mobile */
	.modal {
		height: 95vh !important;
		max-height: 95vh !important;
	}

	/* Ensure buttons remain touch-friendly */
	.button-restart {
		min-width: 48px;
		min-height: 48px;
		width: 48px;
		height: 48px;
	}

	.button-mic {
		min-width: 60px;
		min-height: 60px;
	}

	.button-upload {
		min-width: 48px;
		min-height: 48px;
		width: 48px;
		height: 48px;
	}

	/* Adjust button group spacing for smaller screens */
	.button-group-horizontal {
		gap: 8px;
	}

	/* Adjust recording controls for mobile */
	.recording-controls {
		gap: 0.75rem;
	}

	.recording-actions {
		flex-direction: column;
		align-items: stretch;
	}

	.recording-actions button {
		width: 100%;
	}
}

/* Settings */